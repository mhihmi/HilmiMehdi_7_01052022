<template>
  <header class="home-header" v-if="!storeAuth.loggedIn">
    <a href="#" title="vers l'accueil" class="home-header__logo">
      <svg
        viewBox="0 0 60 59"
        xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="xMinYMid meet"
      >
        <path
          d="M30.144 58.889c7.89 0 15.286-3.03 20.851-8.594 5.565-5.565 8.594-12.961 8.594-20.85 0-7.89-3.03-15.286-8.594-20.851C45.43 3.029 38.034 0 30.145 0c-7.89 0-15.286 3.029-20.851 8.594C3.729 14.159.7 21.555.7 29.444c0 7.89 3.029 15.286 8.594 20.851 5.565 5.565 12.961 8.594 20.85 8.594Zm1.691-5.001c-.564.07-1.127.07-1.69.07-.775 0-1.55-.07-2.325-.14-2.536-3.946-4.438-8.172-5.565-12.61h12.468c.423 1.057 1.198 2.043 2.113 2.677-1.197 3.522-2.888 6.833-5.001 10.003Zm6.692-1.41a44.203 44.203 0 0 0 3.24-7.537c2.043-.422 3.663-1.83 4.438-3.733h5.424c-2.818 5.142-7.537 9.157-13.102 11.27Zm16.06-23.034c0 2.325-.352 4.58-.915 6.763h-7.608c-.422-.916-1.127-1.761-1.972-2.395.14-1.55.211-3.1.211-4.65 0-2.183-.14-4.367-.422-6.48h9.72c.705 2.113.986 4.438.986 6.763ZM51.63 17.681h-8.594c-.916-3.875-2.254-7.537-4.085-11.06 5.353 2.043 9.861 6.058 12.679 11.06ZM39.372 29.163c0 1.197-.07 2.395-.14 3.592-1.973.423-3.593 1.69-4.368 3.452H21.269c-.282-2.113-.493-4.297-.493-6.41 0-1.339.07-2.677.211-4.015 1.832-.353 3.31-1.55 4.227-3.1H38.95c.281 2.113.422 4.297.422 6.48ZM28.312 5.072c.635-.07 1.269-.07 1.832-.07.705 0 1.41 0 2.114.07 2.535 3.944 4.437 8.171 5.564 12.609H25.566a6.73 6.73 0 0 0-2.184-3.03 45.68 45.68 0 0 1 4.93-9.58ZM21.622 6.48a52.145 52.145 0 0 0-3.1 7.044c-2.183.422-3.944 2.043-4.649 4.085H8.73c2.747-5.001 7.326-9.016 12.891-11.13ZM5.701 29.445c0-2.325.352-4.65.986-6.763h7.679c.422.775 1.056 1.48 1.76 2.043-.14 1.69-.281 3.381-.281 5.072 0 2.183.14 4.297.422 6.41h-9.58c-.704-2.184-.986-4.438-.986-6.762Zm11.412 11.693c.916 3.803 2.254 7.537 4.085 11.059A24.682 24.682 0 0 1 8.66 41.137h8.453Z"
          fill="var(--color-text)"
        />
      </svg>
    </a>
    <h1 class="home-header__title">{{ msg }}</h1>
  </header>
  <header class="feeds-header" v-if="storeAuth.loggedIn">
    <div class="feeds-header__container">
      <div class="feeds-header__logo">
        <a href="#" title="vers l'accueil">
          <svg
            viewBox="0 0 60 59"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMinYMid meet"
          >
            <path
              d="M30.144 58.889c7.89 0 15.286-3.03 20.851-8.594 5.565-5.565 8.594-12.961 8.594-20.85 0-7.89-3.03-15.286-8.594-20.851C45.43 3.029 38.034 0 30.145 0c-7.89 0-15.286 3.029-20.851 8.594C3.729 14.159.7 21.555.7 29.444c0 7.89 3.029 15.286 8.594 20.851 5.565 5.565 12.961 8.594 20.85 8.594Zm1.691-5.001c-.564.07-1.127.07-1.69.07-.775 0-1.55-.07-2.325-.14-2.536-3.946-4.438-8.172-5.565-12.61h12.468c.423 1.057 1.198 2.043 2.113 2.677-1.197 3.522-2.888 6.833-5.001 10.003Zm6.692-1.41a44.203 44.203 0 0 0 3.24-7.537c2.043-.422 3.663-1.83 4.438-3.733h5.424c-2.818 5.142-7.537 9.157-13.102 11.27Zm16.06-23.034c0 2.325-.352 4.58-.915 6.763h-7.608c-.422-.916-1.127-1.761-1.972-2.395.14-1.55.211-3.1.211-4.65 0-2.183-.14-4.367-.422-6.48h9.72c.705 2.113.986 4.438.986 6.763ZM51.63 17.681h-8.594c-.916-3.875-2.254-7.537-4.085-11.06 5.353 2.043 9.861 6.058 12.679 11.06ZM39.372 29.163c0 1.197-.07 2.395-.14 3.592-1.973.423-3.593 1.69-4.368 3.452H21.269c-.282-2.113-.493-4.297-.493-6.41 0-1.339.07-2.677.211-4.015 1.832-.353 3.31-1.55 4.227-3.1H38.95c.281 2.113.422 4.297.422 6.48ZM28.312 5.072c.635-.07 1.269-.07 1.832-.07.705 0 1.41 0 2.114.07 2.535 3.944 4.437 8.171 5.564 12.609H25.566a6.73 6.73 0 0 0-2.184-3.03 45.68 45.68 0 0 1 4.93-9.58ZM21.622 6.48a52.145 52.145 0 0 0-3.1 7.044c-2.183.422-3.944 2.043-4.649 4.085H8.73c2.747-5.001 7.326-9.016 12.891-11.13ZM5.701 29.445c0-2.325.352-4.65.986-6.763h7.679c.422.775 1.056 1.48 1.76 2.043-.14 1.69-.281 3.381-.281 5.072 0 2.183.14 4.297.422 6.41h-9.58c-.704-2.184-.986-4.438-.986-6.762Zm11.412 11.693c.916 3.803 2.254 7.537 4.085 11.059A24.682 24.682 0 0 1 8.66 41.137h8.453Z"
              fill="var(--color-text)"
            />
          </svg>
        </a>
        <h1 class="feeds-header__title">{{ msg }}</h1>
        <h2>{{ storeProfile.pseudo }}</h2>
      </div>
      <nav class="feeds-header__nav">
        <button class="feeds-header__navProfile"><img src="" alt="" /></button>
        <router-link to="/" @click="logOut()" class="feeds-header__navLogout">
          <svg
            width="24"
            height="22"
            viewBox="0 0 24 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1.5 0.5C0.671573 0.5 0 1.17157 0 2V20C0 20.8284 0.671573 21.5 1.5 21.5C2.32843 21.5 3 20.8284 3 20V2C3 1.17157 2.32843 0.5 1.5 0.5Z"
              fill="var(--color-text)"
            />
            <path
              d="M16.9393 14.4393C16.3536 15.0251 16.3536 15.9749 16.9393 16.5607C17.5251 17.1464 18.4749 17.1464 19.0607 16.5607L23.5607 12.0607C23.842 11.7794 24 11.3978 24 11C24 10.6022 23.842 10.2206 23.5607 9.93934L19.0607 5.43934C18.4749 4.85355 17.5251 4.85355 16.9393 5.43934C16.3536 6.02513 16.3536 6.97487 16.9393 7.56066L18.8787 9.5L7.5 9.5C6.67157 9.5 6 10.1716 6 11C6 11.8284 6.67157 12.5 7.5 12.5H18.8787L16.9393 14.4393Z"
              fill="var(--color-text)"
            />
          </svg>
        </router-link>
      </nav>
    </div>
  </header>
</template>

<script>
import { useAuthStore } from "@/store/useAuth";
import { useProfileStore } from "@/store/useProfile";

export default {
  name: "HomeHeader",
  props: {
    msg: String,
  },
  setup() {
    let storeAuth = useAuthStore();
    let storeProfile = useProfileStore();
    storeProfile.getUserProfile();
    return {
      storeAuth,
      storeProfile,
    };
  },
  methods: {
    logOut() {
      localStorage.clear();
      this.storeAuth.clearAuth();
      this.$router.push("/login");
      // console.log(this.storeAuth.$state);
      // console.log(this.storeAuth.loggedIn);
    },
  },
  // console.log(Authenticated),
};
</script>

<style scoped lang="scss">
@import "@/styles/layout/homeHeader";
@import "@/styles/layout/feedsHeader";
</style>
